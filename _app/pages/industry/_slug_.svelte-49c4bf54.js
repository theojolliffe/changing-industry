import{X as E,S as L,i as O,s as M,w as P,x as T,y as B,q as p,o as j,B as C,e as I,k as N,l as U,U as R,c as z,a as D,d as g,m as F,M as H,b as J,H as X,g as S,O as A,p as G,n as K}from"../../chunks/vendor-f71fbfed.js";import{a as w}from"../../chunks/paths-396f020f.js";import{M as Q}from"../../chunks/Module-09a927b2.js";import"../../chunks/SelectJob-ecfc37d1.js";import"../../chunks/Share-361cb07e.js";function q(s){let t,i;return t=new Q({props:{occupations:s[0],industry:s[3],industry_all:s[5],industry_tot:s[4],template:s[6],id:s[2],section:s[1],indlang:s[7],indbreakdown:s[8],occLU:s[10]}}),{c(){P(t.$$.fragment)},l(n){T(t.$$.fragment,n)},m(n,l){B(t,n,l),i=!0},p(n,l){const u={};l&1&&(u.occupations=n[0]),l&8&&(u.industry=n[3]),l&32&&(u.industry_all=n[5]),l&16&&(u.industry_tot=n[4]),l&64&&(u.template=n[6]),l&4&&(u.id=n[2]),l&2&&(u.section=n[1]),l&128&&(u.indlang=n[7]),l&256&&(u.indbreakdown=n[8]),l&1024&&(u.occLU=n[10]),t.$set(u)},i(n){i||(p(t.$$.fragment,n),i=!0)},o(n){j(t.$$.fragment,n),i=!1},d(n){C(t,n)}}}function V(s){let t,i,n,l,u,d,_,a=s[9]&&q(s);return{c(){t=I("script"),n=N(),a&&a.c(),l=U(),this.h()},l(o){const r=R('[data-svelte="svelte-k5nz1c"]',document.head);t=z(r,"SCRIPT",{src:!0});var f=D(t);f.forEach(g),r.forEach(g),n=F(o),a&&a.l(o),l=U(),this.h()},h(){H(t.src,i="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")||J(t,"src",i)},m(o,r){X(document.head,t),S(o,n,r),a&&a.m(o,r),S(o,l,r),u=!0,d||(_=A(t,"load",s[11]()),d=!0)},p(o,[r]){o[9]?a?(a.p(o,r),r&512&&p(a,1)):(a=q(o),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(K(),j(a,1,1,()=>{a=null}),G())},i(o){u||(p(a),u=!0)},o(o){j(a),u=!1},d(o){g(t),o&&g(n),a&&a.d(o),o&&g(l),d=!1,_()}}}async function et({params:s,fetch:t}){let i=s.slug,n=i.split("-")[0],l=i.split("-")[1],d=await(await t(`${w}/data/industrywords.json`)).json(),a=await(await t(`${w}/data/industry_fake.json`)).json(),o=a.Total,r=a[n];delete a.Total;let y=await(await t(`${w}/data/template.pug`)).text(),c=await t(`${w}/data/occupations.csv`);c=await c.text();let m=await(await t(`${w}/data/indbreakdown.json`)).json(),b={};return E.parse(c).data.forEach(e=>{e[0]!="Occupation"&&(b[e[0]]=e[1])}),{props:{industry:r,industry_tot:o,industry_all:a,slug:i,id:n,section:l,template:y,occupations:b,indlang:d,indbreakdown:m}}}function W(s,t,i){let{section:n}=t,{id:l}=t,{slug:u}=t,{industry:d}=t,{industry_tot:_}=t,{industry_all:a}=t,{template:o}=t,{occupations:r}=t,{indlang:f}=t,{indbreakdown:y}=t,c=Object.keys(r);c=c.map(e=>({code:e.slice(0,4),name:e.slice(5)}));let k={};c.forEach(e=>{i(10,k[e.code]=e.name,k)}),Object.keys(r).map(function(e,Y){console.log("occupations[key]",r[e]);let h=parseInt(String(r[e]).replace(/,/g,""));h=parseFloat(h.toPrecision(2)),i(0,r[e.slice(0,4)]=h,r),delete r[e]});let m;const b=()=>{i(9,m=!0)};return s.$$set=e=>{"section"in e&&i(1,n=e.section),"id"in e&&i(2,l=e.id),"slug"in e&&i(12,u=e.slug),"industry"in e&&i(3,d=e.industry),"industry_tot"in e&&i(4,_=e.industry_tot),"industry_all"in e&&i(5,a=e.industry_all),"template"in e&&i(6,o=e.template),"occupations"in e&&i(0,r=e.occupations),"indlang"in e&&i(7,f=e.indlang),"indbreakdown"in e&&i(8,y=e.indbreakdown)},s.$$.update=()=>{s.$$.dirty&512&&console.log("loaded",m)},[r,n,l,d,_,a,o,f,y,m,k,b,u]}class nt extends L{constructor(t){super();O(this,t,W,V,M,{section:1,id:2,slug:12,industry:3,industry_tot:4,industry_all:5,template:6,occupations:0,indlang:7,indbreakdown:8})}}export{nt as default,et as load};
